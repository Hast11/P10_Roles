<section> 
    <h2>Posts:</h2>
    <div class="postOptions">
        <%# P10 - Tarea 3.1: El botón de crear un nuevo post solo le aparezca al usuario si está logueado.%>
        <% if(locals.loginUser) {%>
            <a class="button-2" href="/posts/new">Nuevo post</a>
        <% } %>
    </div>
    <a href="/posts/new">Nuevo Post</a>
    <% for (var j in posts) { %>
        <% var post = posts[j]; %>  
        <article class="postShow">
            <h3 class="TituloPost"><%= post.title %></h3>
            <%- include('../attachments/_attachment', { post: post }) %>  //Importantisimo
            <div class="OpcionesPost">
                <a class="button-2" href="/posts/<%= post.id %>">Show</a>
                <%# P9 - Tarea 3.2: Los botones para editar o borrar un post solo le aparecen a los usuarios administradores o al autor del post. %>
                <% if(locals.loginUser?.isAdmin || locals.loginUser?.id === post.authorId) {%>
                    <a class="button-2" href="/posts/<%= post.id %>/edit">Edit</a>
                    <a class="button-2" href="/posts/<%= post.id %>?_method=DELETE" onClick="return confirm('Delete: <%= post.title %>');">Delete</a>
                <% } %></div>
            <div>
                Post de:<b><%= post.author?.username ?? "Vete tu a saber" %></b>
            </div>
        </article>
    <% } %>
</section>